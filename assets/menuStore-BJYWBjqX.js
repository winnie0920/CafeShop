import{J as o}from"./index-BjlnAQqZ.js";const l=o("menu",{state:()=>({homeMenu:[],menuSelect:[],debouncing:!1}),actions:{pushMenuSelect(e){this.menuSelect.push(e)},setHomeMenu(e){this.homeMenu=e},findMenuItem(e,t,n){return n?this.menuSelect.find(u=>{const i=u.option&&Object.keys(u.option).length===Object.keys(n).length;return u.menuId===e&&u.childId===t&&i&&Object.keys(n).every(s=>JSON.stringify(u.option[s])===JSON.stringify(n[s]))}):this.menuSelect.find(u=>u.menuId===e&&u.childId===t)},makeMenuItem(e,t,n){let u=this.findMenuItem(e,t);return u||(this.pushMenuSelect({menuId:e,childId:t,count:0,price:0,detail:n}),u=this.findMenuItem(e,t)),u},addMenuSelect(e,t){const n=this.makeMenuItem(e,t.id,t);n.count<t.count&&n.count++,n.price=n.count*t.price},removeMenuSelect(e,t){const n=this.findMenuItem(e,t);n.count>1?n.count--:this.menuSelect.splice(this.menuSelect.indexOf(n),1)},totalOptionPrice(e,t){return(Array.isArray(e)?e:[]).reduce((u,i)=>{const s=t[i.type];if(s!==void 0){const c=i.children.find(r=>r.id===s);if(c&&c.price)return u+c.price}return u},0)},getCount(e,t){const n=this.findMenuItem(e,t),u=this.menuSelect.filter(i=>i.menuId===e&&i.childId===t).reduce((i,s)=>i+s.count,0);return n?u:0},calculateTotal(){return this.menuSelect.reduce((e,t)=>e+t.price,0)},checkOrder(e){this.menuSelect.length>0&&e.push({name:"UserCheckout"})},async debounceAction(e,t=1e3){this.debouncing||(this.debouncing=!0,await e(),setTimeout(()=>{this.debouncing=!1},t))}}});export{l as u};
