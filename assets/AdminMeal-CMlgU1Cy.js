import{u as R,_ as V}from"./showStore-m6tnM1e-.js";import{_ as A}from"./ConfirmBtn-Bio-Qf65.js";import{_ as q,a as P,n as b,r as B,j as E,h as e,c as n,F as C,l as N,t as y,q as u,d as t,f as i,e as c,s as $,k as x,K as F,m as K}from"./index-BjlnAQqZ.js";import{u as L}from"./imageStore-fQkg73oQ.js";import{_ as z}from"./AdminTitleBar-BhEdC3Em.js";import{b as S}from"./User-CfpT1Yns.js";import"./DropDown-FOo6tuF-.js";const G={key:0},H={key:0,class:"admin__title"},J={class:"admin__container"},Q=["src"],W={class:"d-flex justify-content-between text-center"},X={class:"d-flex justify-content-end gap-2 position-relative"},Y={class:"admin__start"},Z={__name:"AdminMealCard",props:{data:Object},emits:["deleteData"],setup(M,{emit:h}){const _=M,f=h,g=L(),m=R(),l=P(),o=b(),a=B(null),k=(s,r)=>{a.value={name:r.name,id:r.id,children:s},o.push({name:"AdminMealDetail",query:{parent:r.id,id:s.id}})},v=s=>{m.togglePopupShow("check",!0),F(()=>{f("deleteData",s)})},w=()=>{m.togglePopupShow("check",!1),l.pushMsg("Common-Ok","成功刪除","brown")},I=s=>{m.togglePopupShow("check",s)};return(s,r)=>{const U=K,D=A,j=E("router-view"),O=V;return e(),n(C,null,[s.$route.path!=="/admin/meal/detail"?(e(),n("div",G,[(e(!0),n(C,null,N(_.data,p=>(e(),n("div",{key:p.id},[p.children.length>0?(e(),n("h4",H,y(p.name),1)):u("",!0),t("div",J,[(e(!0),n(C,null,N(p.children,d=>(e(),n("div",{key:d.index,class:"admin__card"},[t("img",{src:i(g).getImageUrl(d.image),alt:"mealImage"},null,8,Q),t("div",W,[t("h5",null,y(d.name),1),t("h6",null,"$ "+y(d.price),1)]),t("div",X,[t("div",Y,[r[0]||(r[0]=t("p",{class:"hover-text"},"已啟用",-1)),u("",!0),c(U,{iconName:"Common-Ok"}),u("",!0)]),c(D,{styles:["brown","circle"],iconName:"Common-Pencil",onClick:T=>k(d,p)},null,8,["onClick"]),c(D,{styles:["gray","circle"],iconName:"Common-Trash",onClick:T=>v(d)},null,8,["onClick"])])]))),128))])]))),128))])):(e(),$(j,{key:1,data:i(a)},null,8,["data"])),c(O,{show:i(m).popupShow.check,title:"刪除餐點",button:"確認",onCloseShow:I,onConfirmPopup:w,style:{width:"30rem",height:"15rem"}},{main:x(()=>r[1]||(r[1]=[t("div",{class:"popup__text-content"},[t("p",null,"是否確定刪除餐點？")],-1)])),_:1},8,["show"])],64)}}},ee=q(Z,[["__scopeId","data-v-9ace4a20"]]),te={class:"User__container"},oe={class:"col-auto d-flex me-sm-auto me-none p-0"},ne={key:0,class:"col-auto d-flex p-0"},de={__name:"AdminMeal",setup(M){const h=P(),_=b(),f=B({title:"餐點分類",drop:"meal",width:"10rem"}),g=()=>{h.pushMsg("Common-Ok","同步餐點完畢","brown")},m=l=>{S.forEach(o=>{o.children=o.children.filter(a=>a.name!==l.name)})};return(l,o)=>{const a=A,k=z,v=ee;return e(),n("div",te,[c(k,{class:"sticky-top",dropdown:l.$route.path!=="/admin/meal/detail"?i(f):null,data:i(S)},{refresh:x(()=>[t("div",oe,[l.$route.path!=="/admin/meal/detail"?(e(),$(a,{key:0,title:"同步餐點",iconName:"Meal-Refresh",onClick:g})):(e(),$(a,{key:1,title:"返回",iconName:"User-Return",onClick:o[0]||(o[0]=w=>i(_).go(-1))}))])]),add:x(()=>[l.$route.path!=="/admin/meal/detail"?(e(),n("div",ne,[c(a,{title:"新增餐點",iconName:"User-Add",onClick:o[1]||(o[1]=w=>i(_).push({name:"AdminMealDetail"}))})])):u("",!0)]),_:1},8,["dropdown","data"]),c(v,{data:i(S),onDeleteData:m},null,8,["data"])])}}};export{de as default};
